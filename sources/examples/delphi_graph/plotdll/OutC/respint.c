//File: respint.c 
//Generated by TMC Converter(C)2009-2013
#include "tmc.h"
#include "stdtmc.h"

#include "TestO.globals.h"

// User provided C-code header (must be included in include path):
#include "External_func.h"

// % Lines 1--3:
//function [Mag,Ph,num,den]=respint(Ni,w)

//% calculate response of integrators

//s = j*w;

void tmcrespint(int nargout, int nargin,tmsMatrix *Mag,tmsMatrix *Ph,tmsMatrix *num,tmsMatrix *den
,tmsMatrix *Ni,tmsMatrix *w) {
tmsMatrix **reg=tmcCreateRegFrame(34);
tmsMatrix *s=tmcNewMatrix();
tmsMatrix *P=tmcNewMatrix();

TRY
TMC_DBG_PUSH_STACK_VAR("respint",8,
Ni,"Ni",
w,"w",
Mag,"Mag",
Ph,"Ph",
num,"num",
den,"den",
s,"s",
P,"P");

//CALL function
tmcReallocRegister(reg[1]);
tmcj(1,0, reg[1]);

tmcMul(reg[3],reg[1],w);

tmcAssign(s,reg[3]);
//statement here,line 3

// % Lines 4--9:
//% if Ni>0

//%     P = 1./ s;

//% else

//%     P = ones(1,length(w));

//% end

// P = 1./ (s.^Ni);

tmcScalar(reg[5],1.000000000000000e+000);


tmcPowerScalar(reg[8],s,Ni);
tmcDivScalar(reg[9],reg[5],reg[8]);

tmcAssign(P,reg[9]);
//statement here,line 9

// % Lines 10--10:
//Mag = 20*log10(abs(P));

tmcScalar(reg[11],2.000000000000000e+001);

//CALL function
tmcReallocRegister(reg[13]);
tmcabs(1,1, reg[13], P);
//CALL function
tmcReallocRegister(reg[14]);
tmclog10(1,1, reg[14], reg[13]);
tmcMul(reg[15],reg[11],reg[14]);

tmcAssign(Mag,reg[15]);
//statement here,line 10

// % Lines 11--11:
//Ph = unwrap( angle( P ) ) /pi * 180;


//CALL function
tmcReallocRegister(reg[18]);
tmcangle(1,1, reg[18], P);
//CALL function
tmcReallocRegister(reg[19]);
tmcunwrap(1,1, reg[19], reg[18],NULL);
//CALL function
tmcReallocRegister(reg[20]);
tmcpi(1,0, reg[20]);
tmcDiv(reg[21],reg[19],reg[20]);
tmcScalar(reg[22],1.800000000000000e+002);
tmcMul(reg[23],reg[21],reg[22]);

tmcAssign(Ph,reg[23]);
//statement here,line 11

// % Lines 12--12:
//num = 1;

tmcScalar(reg[25],1.000000000000000e+000);

tmcAssign(num,reg[25]);
//statement here,line 12

// % Lines 13--13:
//den = [1,zeros(1,Ni)];

tmcScalar(reg[27],1.000000000000000e+000);
tmcScalar(reg[28],1.000000000000000e+000);

//CALL function
tmcReallocRegister(reg[30]);
tmczeros(1,2, reg[30], reg[28], Ni);
tmcCollectColumns(reg[31],2,reg[27],reg[30]);
tmcCollectRows(reg[32],1,reg[31]);

tmcAssign(den,reg[32]);
//statement here,line 13

// % Lines 14--14:
label_1: ; //end Function
FINALLY
tmcFreeLocalVar(P);
tmcFreeLocalVar(s);
tmcFreeRegFrame(reg);

TMC_DBG_POP_STACK_VAR(8);

ENDFINALLY
}

//FUNCTION DEFINITION BEGIN
//statement here,line 14

// % Lines 15--15:
