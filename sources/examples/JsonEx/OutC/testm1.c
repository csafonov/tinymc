//File: testm1.c 
//Generated by TMC Converter(C)2009-2016
#include "tmc.h"
#include "stdtmc.h"

#include "testm.globals.h"

// User provided C-code header (must be included in include path):
#include "External_func.h"

// % Lines 1--4:
//function [x,y]=testm1( fn)

//

//if ~isempty(fn)

//		JData = json_read(fn);

void tmctestm1(int nargout, int nargin,tmsMatrix *x,tmsMatrix *y
,tmsMatrix *fn__input__tmc) {
tmsMatrix **reg=tmcCreateRegFrame(19);
tmsMatrix *fn=tmcNewMatrix();
tmsMatrix *JData=tmcNewMatrix();

tmcCopyMat(fn,fn__input__tmc);
TRY
TMC_DBG_PUSH_STACK_VAR("testm1",5,
fn__input__tmc,"fn__input__tmc",
x,"x",
y,"y",
fn,"fn",
JData,"JData");


//CALL function
tmcReallocRegister(reg[2]);
tmcisempty(1,1, reg[2], fn);
tmcNot(reg[3],reg[2]);
if(tmcIsFalse(reg[3])) goto label_3; // goto to the end of the clause if the expression is false

//CALL function
tmcReallocRegister(reg[5]);
tmcjson_read(1,1, reg[5], fn);

tmcAssign(JData,reg[5]);
//statement here,line 4

// % Lines 5--6:
//else

//		fn=[];

goto label_2; //branch to end IF
label_3: ; //end IF clause
tmcCreateMatrixEmpty(reg[7]);

tmcAssign(fn,reg[7]);
//statement here,line 6

// % Lines 7--7:
//		JData = json_read;

//CALL function
tmcReallocRegister(reg[9]);
tmcjson_read(1,0, reg[9],NULL);

tmcAssign(JData,reg[9]);
//statement here,line 7

// % Lines 8--8:
//end;

label_4: ; //end IF clause
label_2: ; //end IF
//statement here,line 8

// % Lines 9--9:
//save([fn,'.mat'], 'JData' );


tmcCreateString(reg[12],".mat");
tmcCollectColumns(reg[13],2,fn,reg[12]);
tmcCollectRows(reg[14],1,reg[13]);
//CALL function save
tmcsave(0,2, reg[14], JData, "JData");
//statement here,line 9

// % Lines 10--10:
//x = JData;y=fn;



tmcAssign(x,JData);
//statement here,line 10



tmcAssign(y,fn);
//statement here,line 10

// % Lines 11--13:
//

//

label_1: ; //end Function
FINALLY
tmcFreeLocalVar(JData);
tmcFreeLocalVar(fn);
tmcFreeRegFrame(reg);

TMC_DBG_POP_STACK_VAR(5);

ENDFINALLY
}

//FUNCTION DEFINITION ENDED
//statement here,line 13

// % Lines 14--14:
