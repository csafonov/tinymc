//File: hqrt.c 
//Generated by TMC Converter(C)2009-2016
#include "tmc.h"
#include "stdtmc.h"

#include "TestO.globals.h"

// User provided C-code header (must be included in include path):
#include "External_func.h"

// % Lines 1--6:
//

//function z = hqrt(t,b)

//%

//%  transformation using the t from hessqr

//%

//   [m,n] = size(b);

void tmchqrt(int nargout, int nargin,tmsMatrix *z
,tmsMatrix *t,tmsMatrix *b) {
tmsMatrix **reg=tmcCreateRegFrame(54);
tmsMatrix *m=tmcNewMatrix();
tmsMatrix *n=tmcNewMatrix();
tmsMatrix *k=tmcNewMatrix();
tmsMatrix *j_=tmcNewMatrix();
tmsMatrix *T=tmcNewMatrix();

TRY
TMC_DBG_PUSH_STACK_VAR("hqrt",8,
t,"t",
b,"b",
z,"z",
m,"m",
n,"n",
k,"k",
j_,"j_",
T,"T");


//CALL function
tmcReallocRegister(reg[2]);
tmcReallocRegister(reg[3]);
tmcsize(2,1, reg[2], reg[3], b,NULL);

tmcAssign(m,reg[2]);

tmcAssign(n,reg[3]);
//statement here,line 6

// % Lines 7--7:
//   z = b;



tmcAssign(z,b);
//statement here,line 7

// % Lines 8--8:
//   k = size(t,2);


tmcScalar(reg[9],2.000000000000000e+000);
//CALL function
tmcReallocRegister(reg[10]);
tmcsize(1,2, reg[10], t, reg[9]);

tmcAssign(k,reg[10]);
//statement here,line 8

// % Lines 9--10:
//   for j_ = 1:k

//       T = [t(1,j_),t(2,j_); -t(2,j_), t(1,j_)];

tmcScalar(reg[12],1.000000000000000e+000);

tmcCreateColonBaseLimit(reg[14],reg[12],k);
tmcForIterInit(reg[15],reg[14],j_);
label_4: ; //FOR begin
if(tmcForIterNext(reg[15],reg[14])) goto label_3; // exit for

tmcScalar(reg[17],1.000000000000000e+000);

tmcGetByIndex(reg[19],t,2,reg[17],j_);

tmcScalar(reg[21],2.000000000000000e+000);

tmcGetByIndex(reg[23],t,2,reg[21],j_);
tmcCollectColumns(reg[24],2,reg[19],reg[23]);

tmcScalar(reg[26],2.000000000000000e+000);

tmcGetByIndex(reg[28],t,2,reg[26],j_);
tmcNeg(reg[29],reg[28]);

tmcScalar(reg[31],1.000000000000000e+000);

tmcGetByIndex(reg[33],t,2,reg[31],j_);
tmcCollectColumns(reg[34],2,reg[29],reg[33]);
tmcCollectRows(reg[35],2,reg[24],reg[34]);

tmcAssign(T,reg[35]);
//statement here,line 10

// % Lines 11--11:
//       z(j_:j_+1,:)=T*z(j_:j_+1,:);





tmcScalar(reg[41],1.000000000000000e+000);
tmcAdd(reg[42],j_,reg[41]);
tmcCreateColonBaseLimit(reg[43],j_,reg[42]);
tmcCreateMagicColon(reg[44]);
tmcGetByIndex(reg[45],z,2,reg[43],reg[44]);
tmcMul(reg[46],T,reg[45]);



tmcScalar(reg[50],1.000000000000000e+000);
tmcAdd(reg[51],j_,reg[50]);
tmcCreateColonBaseLimit(reg[52],j_,reg[51]);
tmcCreateMagicColon(reg[53]);
tmcGetRefByIndex(pRefHelper,z,2,reg[52],reg[53]);
tmcAssign(pRefHelper,reg[46]);
//statement here,line 11

// % Lines 12--12:
//   end;
label_2: ; //FOR end
goto label_4; //branch to FOR begin
label_3: ; //FOR exit
//statement here,line 12

label_1: ; //end Function
FINALLY
tmcFreeLocalVar(T);
tmcFreeLocalVar(j_);
tmcFreeLocalVar(k);
tmcFreeLocalVar(n);
tmcFreeLocalVar(m);
tmcFreeRegFrame(reg);

TMC_DBG_POP_STACK_VAR(8);

ENDFINALLY
}

//FUNCTION DEFINITION ENDED
//statement here,line 12

// % Lines 13--13:
